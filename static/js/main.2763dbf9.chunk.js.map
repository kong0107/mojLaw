{"version":3,"sources":["js/lawtext2obj/lawtext2obj.js","js/config.js","components/LawList.js","js/utility.js","components/DivisionList.js","components/Article.js","components/LawContent.js","components/Law.js","components/App.js","serviceWorker.js","index.js"],"names":["lawtext2obj","stratumRE","getStratum","text","i","length","test","text2paras","warning","lines","trimRight","split","map","str","paras","curPara","firstLineInPara","raw","forEach","line","trimLeft","push","stratum","startsWith","children","lastPara","charAt","arr2nested","arr","minDepth","depthProp","arguments","undefined","item","s","Error","Math","min","j","filter","Object","defineProperties","value","module","exports","config","LawList","props","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","query","bind","assertThisInitialized","state","laws","matchedLaws","page","_this2","fetch","concat","cdn","then","res","json","setState","document","querySelector","trim","law","name","indexOf","english","_this3","listLaws","slice","react_default","a","createElement","key","pcode","className","title","lastUpdate","Link","to","pagination","reactstrap_es","aria-label","disabled","previous","onClick","next","type","placeholder","onInput","Component","input","init","Promise","resolve","reject","window","mode","ok","ReferenceError","statusText","log","_console","console","apply","numf","number","p1","p2","floor","toString","DivisionList","divisions","div","id","prefix","child","start","end","href","defaultProps","Article","article","content","createList","items","para","frags","frag","LawContent","Infinity","divPrefix","articles","header","main","components_Article","Law","lawInfo","match","params","catch","dl","preamble","components_DivisionList","components_LawContent","App","BrowserRouter","basename","App_Header","Switch","Route","path","exact","component","App_Footer","Header","UpdateDate","updateDateContainer","Footer","Boolean","location","hostname","ReactDOM","render","components_App","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.2763dbf9.chunk.js","sourcesContent":["let lawtext2obj;\n\n{\n/**\n * 判斷項款目\n */\nconst stratumRE = [\n    /^(?! )/,\n    /^第[一二三四五六七八九十]+類：/,          // 所得稅法第14條第1項\n    /^\\s*[一二三四五六七八九十]+(、|　| {2})/,  // 憲法裡的「款」有些是全形空格，有些是兩個半形空格\n    /^\\s*[(（][一二三四五六七八九十]+[)）]/, // 有些括號是全形，有些是半形\n    /^\\s+\\d+\\./,\n    /^\\s+[(（]\\d+[)）]/\n];\nconst getStratum = text => {\n    for(let i = stratumRE.length - 1; i >= 0; --i)\n        if(stratumRE[i].test(text)) return i;\n    return -1;\n};\n\n\n/**\n * 處理換行字元排版，輸出一維陣列。\n *\n * 所得稅法第14條第1項那種「類」裡面還有分「段」的，先加個換行然後併進前一個元素裡。\n * 該項第四類各款後還有一段，就會被錯誤地歸到該類第三款裡頭，不過先不管了。\n *\n * 警告類型：（可能會互相覆蓋，但先不管了）\n * * fullLine: 該行雖是句號結尾，所以不知道下一行是否是新的一「項」。\n * * formula: 算式。但未必有等號或分號符號，例如全民健康保險藥物給付項目及支付標準第75條第3款第2目\n *   @see {@link https://unicode-table.com/en/blocks/mathematical-operators/ }\n *   @see {@link https://unicode-table.com/en/blocks/halfwidth-and-fullwidth-forms/ }\n * * table: 表格。例如用戶用電設備裝置規則第62條\n *   @see {@link https://unicode-table.com/en/blocks/box-drawing/ }\n */\nconst text2paras = text => {\n    const lines = text.trimRight().split(\"\\n\").map(str => str.trimRight());\n\n    let paras = []; // 不管層級的項款目陣列\n    let curPara = \"\";   // 處理中的項款目，不含空格，用於輸出\n    let firstLineInPara = \"\"; // 處理中的項款目的第一行原始文字，包含空格，用於判斷層級，以及是不是所得稅法第14條的情形。\n    let warning; // 紀錄可能需要警告的情形，於新的段落時重置。\n    let raw = []; // 紀錄原本是哪幾行字，於有警告的時候一併回傳。\n\n    lines.forEach(line => {\n        if(!curPara) firstLineInPara = line;\n        curPara += line.trimLeft();\n        raw.push(line);\n        if(/[\\u2500-\\u257F]/.test(line)) warning = \"table\";\n        if(/[\\u2200-\\u22FF＊＋－／＜＝＞]/.test(line)) warning = \"formula\";\n\n        // 如果這一行「不是」項款目的結束，那就換下一行處理。\n        if(!/(：|︰|。|（刪除）)$/.test(line)) return;\n\n        /**\n         * 處理「這一個項款目結束了」的情形。\n         * 預設是要將 curPara 當成一個新的項款目塞入，但要先偵測兩種例外情形：\n         * 如果 stratum 小於零，那就是所得稅法第14條那種「類款目」裡頭還分段的情形；\n         * 如果被判斷為「項」並以「但」字開頭，表示是前一個滿行的「項」的但書，例如所得稅法第80條第3項但書。\n         */\n        const stratum = getStratum(firstLineInPara);\n        if(stratum < 0) paras[paras.length - 1].text += \"\\n\" + curPara;\n        else if(stratum === 0 && curPara.startsWith(\"但\")) {\n            paras[paras.length - 1].text += curPara;\n            delete paras[paras.length - 1].warning;\n        }\n        else paras.push({\n            text: curPara,\n            stratum: stratum,\n            children: []\n        });\n\n        const lastPara = paras[paras.length - 1];\n        // 有可能該行雖是句號結尾，但其實還沒有要分項，因此標示警告。例如所得稅法第14-7條第4項。\n        if(!warning && line.length === 32 && line.charAt(31) === \"。\") warning = \"fullLine\";\n        if(warning) {\n            lastPara.warning = warning;\n            lastPara.raw = raw;\n        }\n\n        curPara = \"\";\n        warning = false;\n        raw = [];\n    });\n\n    return paras;\n};\n\n/**\n * 把一維陣列轉成巢狀\n *\n * 方法：把項目塞到「前一個比自己高層級」的 children 裡。\n */\nconst arr2nested = (arr, depthProp = \"stratum\") => {\n    let minDepth;\n    arr.forEach((item, i) => {\n        const s = item[depthProp];\n        if(s < 0) throw new Error(\"分層錯誤\");\n        minDepth = i ? Math.min(minDepth, s) : s;\n        if(s === minDepth) return;\n        for(let j = i - 1; j >= 0; --j)\n            if(arr[j][depthProp] < s) {\n                if(!arr[j].children) arr[j].children = [];\n                arr[j].children.push(item);\n                return;\n            }\n    });\n    // 最後回傳最高層級的陣列，即會有全部。\n    return arr.filter(item => item[depthProp] === minDepth);\n}\n\nlawtext2obj = text => arr2nested(text2paras(text));\nObject.defineProperties(lawtext2obj, {\n    \"stratumRE\": {value: stratumRE},\n    \"getStratum\": {value: getStratum},\n    \"text2paras\": {value: text2paras},\n    \"arr2nested\": {value: arr2nested}\n});\n}\n\nif(typeof module === 'object') module.exports = lawtext2obj;\n//export default lawtext2obj;\n/*\n    如果改成 ES6 方式：\n    * 前端瀏覽器的引用方法需改用 <script type=\"mode\" src=\"lawtext2obj.js\"></script>\n    * Chrome 外掛需將本檔列在 web_accessible_resources ，再用 content_scripts 列的檔案去引入，參閱：\n      * https://stackoverflow.com/questions/48104433/how-to-import-es6-modules-in-content-script-for-chrome-extension/48121629#48121629\n      * https://medium.com/front-end-hacking/es6-modules-in-chrome-extensions-an-introduction-313b3fce955b\n*/\n","const config = {};\n\nif(process.env.NODE_ENV === 'production') {\n    config.cdn = 'https://raw.githubusercontent.com/kong0107/mojLawSplitJSON/arranged';\n    config.basename = '/mojLaw/';\n\n}\nelse {\n    config.cdn = 'http://localhost/kong0107/mojLawSplit/json_arrange';\n    config.basename = '/kong0107/mojLaw/';\n}\n/*-{\n    cdn: (process.env.NODE_ENV === 'production')\n    ? 'https://raw.githubusercontent.com/kong0107/mojLawSplitJSON/arranged'\n    : 'http://localhost/kong0107/mojLawSplit/json_arrange'\n};*/\n\nexport default config;\n","import React, {\n  Component\n} from 'react';\n\nimport {\n  Link\n} from \"react-router-dom\";\n\nimport {\n  Pagination,\n  PaginationItem,\n  PaginationLink\n} from 'reactstrap';\n\nimport config from '../js/config';\nimport '../styles/LawList.scss';\n\nclass LawList extends Component {\n  constructor(props) {\n    super(props);\n    this.query = this.query.bind(this);\n    this.state = {\n      query: '',\n      laws: [],\n      matchedLaws: [],\n      page: 1\n    };\n  }\n\n  componentDidMount() {\n    fetch(`${config.cdn}/index.json`)\n    .then(res => res.json())\n    .then(laws => this.setState({laws}))\n    .then(this.query);\n  }\n\n  query() {\n    const query = document.querySelector('input').value.trim();\n    if(!query) return this.setState({matchedLaws: this.state.laws});\n    this.setState({matchedLaws: this.state.laws.filter(law => {\n      if(law.name.indexOf(query) !== -1) return true;\n      if(law.english && law.english.indexOf(query) !== -1) return true;\n      return false;\n    })});\n  }\n\n  render() {\n    const ipp = 20;\n    const page = this.state.page;\n    const matchedLaws = this.state.matchedLaws;\n    const listLaws = matchedLaws.slice((page - 1) * ipp, page * ipp).map(law =>\n      <li key={law.pcode}>\n        <div className=\"LawList-lastUpdate\" title=\"最新異動日期\"><time>{law.lastUpdate}</time></div>\n        <Link to={`/laws/${law.pcode}`} className=\"LawList-name\">{law.name}</Link>\n        <div className=\"LawList-english\">{law.english}</div>\n      </li>\n    );\n    const pagination = matchedLaws.length <= ipp ? null : (\n      <Pagination aria-label=\"Page navigation\">\n        <PaginationItem disabled={page===1}>\n          <PaginationLink previous onClick={()=>this.setState({page: page - 1})} />\n        </PaginationItem>\n        <PaginationItem disabled={page > matchedLaws / ipp}>\n          <PaginationLink next onClick={()=>this.setState({page: page + 1})} />\n        </PaginationItem>\n      </Pagination>\n    );\n\n    return (\n      <div className=\"LawList\">\n        <input type=\"text\" placeholder=\"搜尋\" onInput={this.query} />\n        <div>Page: {page}</div>\n        <div>{pagination}</div>\n        <ul className=\"LawList-main\">{listLaws}</ul>\n      </div>\n    );\n  }\n}\n\nexport default LawList;\n","/**\n * 重包 Fetch API ，使 HTTP error 也會 reject\n */\nexport const fetch = (input, init) =>\n  new Promise((resolve, reject) =>\n    window.fetch(input, {mode: 'cors'})\n    .then(res => res.ok ? resolve(res) : reject(new ReferenceError(res.statusText)), reject)\n  )\n;\n\nexport const log = (...arg) => console.log(...arg);\n\nexport const numf = number => {\n  const p1 = number / 100, p2 = number % 100;\n  return p2 ? Math.floor(p1).toString().concat('-', p2) : p1;\n};\n","import React, {\n  Component\n} from 'react';\n\nimport {numf} from '../js/utility';\n\nclass DivisionList extends Component {\n  render() {\n    const divisions = this.props.divisions.map(div => {\n      const id = this.props.prefix.concat('-', div.number);\n\n      const child = div.children\n        ? (<DivisionList prefix={id} divisions={div.children} />)\n        : null\n      ;\n\n      return (\n        <li key={id} className={`division-${div.type}`}>\n          <div className=\"division-title-container\">\n            <span className=\"division-number\">第 {numf(div.number)} {div.type}</span>\n            <a className=\"division-title\"\n              title={`§§${numf(div.start)}～${numf(div.end)}`}\n              href={`#${id}`}\n            >{div.title}</a>\n          </div>\n          {child}\n        </li>\n      );\n    });\n\n    return <ul className=\"DivisionList\">{divisions}</ul>;\n  }\n}\n\nDivisionList.defaultProps = {\n    prefix: 'div'\n};\n\nexport default DivisionList;\n","import React, {\n  Component\n} from 'react';\n\nimport * as lawtext2obj from '../js/lawtext2obj';\nimport {numf} from '../js/utility';\n\nconst createList = paras => {\n  if(!paras.length) return null;\n  const stratum = paras[0].stratum;\n  const items = paras.map((para, i) => {\n    const child = createList(para.children);\n    const frags = para.text.split(/\\r?\\n/).map((frag, i) => <p key={i}>{frag}</p>);\n    return (<li key={i}>{frags}{child}</li>);\n  });\n  return <ol className={`stratum-${stratum}`}>{items}</ol>;\n};\n\nclass Article extends Component {\n  render() {\n    const article = this.props.article;\n    const content = lawtext2obj(article.content);\n    return (\n      <dl id={`article-${article.number}`}>\n        <dt>第 {numf(article.number)} 條</dt>\n        <dd className=\"Article-content\">{createList(content)}</dd>\n      </dl>\n    );\n  }\n}\n\nexport default Article;\n","import React, {\n  Component\n} from 'react';\nimport Article from './Article';\nimport {numf} from '../js/utility';\n\nclass LawContent extends Component {\n  render() {\n    let divisions = this.props.divisions;\n    if(!divisions.length) divisions = [{\n        number: 0, start: 100, end: Infinity\n    }];\n\n    divisions = divisions.map(div => {\n      const id = this.props.divPrefix.concat('-', div.number);\n      const articles = this.props.articles.filter(article =>\n        article.number >= div.start && article.number <= div.end\n      );\n\n      const header = div.number\n        ? (\n          <header className={`division-title-container division-${div.type}`}>\n            <span className=\"division-number\">第 {numf(div.number)} {div.type}</span>\n            <span className=\"division-title\">{div.title}</span>\n            <span className=\"division-range\">§§ {numf(div.start)}～{numf(div.end)}</span>\n          </header>\n        ) : null\n      ;\n\n      const main = div.children\n        ? (<LawContent divPrefix={id} divisions={div.children} articles={articles} />)\n        : articles.map(article => (<Article key={article.number} article={article} />))\n      ;\n\n      return <li key={id} id={id}>{header}{main}</li>;\n    });\n\n    return <ul className=\"LawContent\">{divisions}</ul>;\n  }\n}\n\nLawContent.defaultProps = {\n  divPrefix: 'div',\n  divisions: [],\n  articles: []\n};\n\nexport default LawContent;\n","import React, {\n  Component\n} from 'react';\n\nimport DivisionList from './DivisionList';\nimport LawContent from './LawContent';\n\nimport config from '../js/config';\nimport {\n  fetch,\n  log\n} from '../js/utility';\n\nimport '../styles/Law.scss';\n\nclass Law extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      lawInfo: {\n        divisions: [],\n        articles: []\n      }\n    };\n  }\n\n  componentDidMount() {\n    fetch(`${config.cdn}/FalVMingLing/${this.props.match.params.pcode}.json`)\n    .then(res => res.json())\n    .then(lawInfo => this.setState({lawInfo}))\n    .catch(log);\n  }\n\n  render() {\n    const law = this.state.lawInfo;\n\n    const dl = [];\n    if(law.preamble) dl.push(\n      <dl key=\"preamble\">\n        <dt>前言</dt>\n        <dd>{law.preamble}</dd>\n      </dl>\n    );\n\n    return (\n      <div className=\"Law\">\n        {\n          law.divisions.length\n          ? <div className=\"Law-divisions-container\"><DivisionList divisions={law.divisions} /></div>\n          : null\n        }\n        <div className=\"Law-main\">\n          <header>\n            <h2 className=\"Law-title\">{law.title}</h2>\n          </header>\n          {dl}\n          <LawContent divisions={law.divisions} articles={law.articles} />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Law;\n","import React, {\n  Component\n} from 'react';\n\nimport {\n  BrowserRouter as Router,\n  Route,\n  Switch,\n  Link\n} from \"react-router-dom\";\n\nimport LawList from './LawList';\nimport Law from './Law';\n\nimport {\n  fetch,\n  log\n} from '../js/utility';\nimport config from '../js/config';\nimport '../styles/App.scss';\n\nclass App extends Component {\n  render() {\n    return (\n      <Router basename={config.basename}>\n        <div className=\"App\">\n          <Header />\n          <div>\n            <main className=\"container\">\n              <Switch>\n                <Route path=\"/\" exact component={LawList} />\n                <Route path=\"/laws/:pcode\" component={Law} />\n              </Switch>\n            </main>\n          </div>\n          <Footer />\n        </div>\n      </Router>\n    );\n  }\n}\n\nclass Header extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  componentDidMount() {\n    fetch(`${config.cdn}/UpdateDate.txt`)\n    .then(res => res.text())\n    .then(UpdateDate => this.setState({UpdateDate}))\n    .catch(log);\n  }\n\n  render() {\n    const updateDateContainer = this.state.UpdateDate\n    ? (\n      <div id=\"updateDateContainer\">\n        更新日期：\n        <time>{this.state.UpdateDate}</time>\n      </div>\n    )\n    : null;\n\n    return (\n      <header>\n        <div>\n          <Link className=\"title\" to=\"/\">法規查詢</Link>\n          {updateDateContainer}\n        </div>\n      </header>\n    );\n  }\n}\n\nclass Footer extends Component {\n  render() {\n    return (\n      <footer>\n        <div>\n          <ul>\n            <li><a href=\"https://data.gov.tw/dataset/18289\" title=\"政府資料開放平台\">資料來源</a></li>\n            <li><a href=\"https://github.com/kong0107/mojLawSplit\">資料處理</a></li>\n          </ul>\n        </div>\n      </footer>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.scss';\nimport App from './components/App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}