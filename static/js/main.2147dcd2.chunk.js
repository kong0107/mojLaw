(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{17:function(e,t,a){var n,r=[/^(?! )/,/^\u7b2c[\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d\u5341]+\u985e\uff1a/,/^\s*[\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d\u5341]+(\u3001|\u3000| {2})/,/^\s*[(\uff08][\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d\u5341]+[)\uff09]/,/^\s+\d+\./,/^\s+[(\uff08]\d+[)\uff09]/],c=function(e){for(var t=r.length-1;t>=0;--t)if(r[t].test(e))return t;return-1},i=function(e){var t,a=e.trimRight().split("\n").map(function(e){return e.trimRight()}),n=[],r="",i="",o=[];return a.forEach(function(e){if(r||(i=e),r+=e.trimLeft(),o.push(e),/[\u2500-\u257F]/.test(e)&&(t="table"),/[\u2200-\u22FF\uff0a\uff0b\uff0d\uff0f\uff1c\uff1d\uff1e]/.test(e)&&(t="formula"),/(\uff1a|\ufe30|\u3002|\uff08\u522a\u9664\uff09)$/.test(e)){var a=c(i);a<0?n[n.length-1].text+="\n"+r:0===a&&r.startsWith("\u4f46")?(n[n.length-1].text+=r,delete n[n.length-1].warning):n.push({text:r,stratum:a,children:[]});var s=n[n.length-1];t||32!==e.length||"\u3002"!==e.charAt(31)||(t="fullLine"),t&&(s.warning=t,s.raw=o),r="",t=!1,o=[]}}),n},o=function(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"stratum";return e.forEach(function(n,r){var c=n[a];if(c<0)throw new Error("\u5206\u5c64\u932f\u8aa4");if(c!==(t=r?Math.min(t,c):c))for(var i=r-1;i>=0;--i)if(e[i][a]<c)return e[i].children||(e[i].children=[]),void e[i].children.push(n)}),e.filter(function(e){return e[a]===t})};n=function(e){return o(i(e))},Object.defineProperties(n,{stratumRE:{value:r},getStratum:{value:c},text2paras:{value:i},arr2nested:{value:o}}),e.exports=n},20:function(e,t,a){e.exports=a(40)},26:function(e,t,a){},28:function(e,t,a){},30:function(e,t,a){},35:function(e,t,a){},38:function(e,t,a){},40:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(16),i=a.n(c),o=(a(26),a(3)),s=a(4),l=a(7),u=a(5),m=a(6),p=a(43),d=a(44),h=a(41),f={siteName:"\u6cd5\u898f\u67e5\u8a62",basename:"/mojLaw/"},v=a(32),b=function(){var e;return(e=console).error.apply(e,arguments)},E=function(e){if(!e)return"0";var t=e.toString().slice(0,-2),a=e%100;return a?t.concat("-",a):t},g=function(e){var t=e.split(/[-.]/),a=100*parseInt(t[0]);return t[1]&&(a+=parseInt(t[1])),a},w=function(e){var t=[],a=[];e.trim().split(/\s+/).forEach(function(e){"-"!==e&&(e.startsWith("-")?a.push(e.substring(1)):t.push(e))});var n=function(e){return!a.some(function(t){return-1!==e.indexOf(t)})&&(!t.length||t.some(function(t){return-1!==e.indexOf(t)}))};return Object.assign(n,{yesList:t,noList:a}),n},y=function(e){return new Promise(function(t,a){return e.then(a,t)})},j=["https://cdn.jsdelivr.net/gh/kong0107/mojLawSplitJSON@arranged/","https://raw.githubusercontent.com/kong0107/mojLawSplitJSON/arranged/"],N=function(e){return(t=j.map(function(t){return a=t+e,n={cache:"no-cache"},new Promise(function(e,t){return fetch(a,n).then(function(a){return a.ok?e(a):t(new ReferenceError(a.statusText))}).catch(t)});var a,n}),y(Promise.all(t.map(y)))).then(function(e){return e.json()});var t},O=new Map;O.set("catalog",N("index.json"));var k={loadCatalog:function(){return O.get("catalog")},loadLaw:function(e){var t=O.get(e);return t||(t=N("FalVMingLing/".concat(e,".json")),O.set(e,t)),t}},C=(a(28),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={isFocused:!1},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t="SearchBox";return this.props.className&&(t+=" "+this.props.className),r.a.createElement("div",{className:t},r.a.createElement("i",{className:"fas fa-search"}),r.a.createElement("div",{className:"SearchBox-inputContainer"},r.a.createElement("input",{className:"SearchBox-input",type:"text",value:this.props.value,placeholder:this.props.placeholder,onChange:function(t){return e.props.onChange(t.target.value)},onFocus:function(){return e.setState({isFocused:!0})},onBlur:function(){return e.setState({isFocused:!1})}}),r.a.createElement("div",{className:"d-none"},"not implemented yet")),r.a.createElement("span",{className:this.props.value?"":"d-none",onClick:function(){return e.props.onChange("")}},r.a.createElement("i",{className:"fas fa-times-circle"})))}}]),t}(n.PureComponent)),S=(a(30),20),x=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={catalog:[],query:"",renderAmount:S},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;k.loadCatalog().then(function(t){return e.setState({catalog:t.sort(function(e,t){return t.lastUpdate-e.lastUpdate})})}).catch(b)}},{key:"render",value:function(){var e=this,t=w(this.state.query),a=this.state.catalog.filter(function(e){return t(e.name)});return r.a.createElement("div",{className:"Catalog"},r.a.createElement("header",null,r.a.createElement("div",{className:"title"},f.siteName),r.a.createElement(C,{value:this.state.query,onChange:function(t){return e.setState({query:t,renderAmount:S})}}),r.a.createElement("span",{className:"Catalog-amount"},a.length," \u7b46\u8cc7\u6599")),r.a.createElement("ul",{className:"Catalog-list"},a.slice(0,this.state.renderAmount).map(function(e){return r.a.createElement(L,{key:e.pcode,law:e})})),r.a.createElement("button",{type:"button",className:a.length>this.state.renderAmount?"btn btn-sm btn-outline-secondary":"d-none",onClick:function(){return e.setState({renderAmount:e.state.renderAmount+S})}},"\u986f\u793a\u66f4\u591a"))}}]),t}(n.PureComponent),L=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e,t=this.props.law;return e="A0000001"===t.pcode||"A0000002"===t.pcode?r.a.createElement("span",{title:"\u61b2\u6cd5",className:"badge badge-warning"},"\u61b2"):/([^\u8fa6]\u6cd5|\u5f8b|\u689d\u4f8b|\u901a\u5247)$/.test(t.name)?r.a.createElement("span",{title:"\u6cd5\u5f8b",className:"badge badge-primary"},"\u6cd5"):r.a.createElement("span",{title:"\u547d\u4ee4",className:"badge badge-success"},"\u4ee4"),r.a.createElement("li",{className:"CatalogItem"},r.a.createElement(v.a,{className:"CatalogItem-link",to:"/laws/".concat(t.pcode)},e,r.a.createElement("time",{className:"CatalogItem-lastUpdate",title:"\u6700\u65b0\u7570\u52d5\u65e5\u671f"},t.lastUpdate),r.a.createElement("div",{className:"CatalogItem-name"},t.name)))}}]),t}(n.PureComponent),D=a(10),A=a(19),q=a(13),P=a(42),H=a(17),I=a.n(H),B=(a(35),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={law:{articles:[],divisions:[],flatDivisions:[],history:[]}},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;k.loadLaw(this.props.match.params.pcode).then(function(t){document.title=t.title;for(var a=t.divisions.slice(),n=0;n<a.length;){var r=a[n];r.children?function(){var e=(r.ancestors||[]).concat(r);r.children.forEach(function(t){return t.ancestors=e}),a.splice.apply(a,[n,1].concat(Object(q.a)(r.children)))}():++n}return t.flatDivisions=a,e.setState({law:t})}).catch(b)}},{key:"componentWillUnmount",value:function(){document.title=f.siteName}},{key:"render",value:function(){var e=this,t=this.props.match,a=this.state.law;return r.a.createElement("div",{className:"Law"},r.a.createElement("header",null,r.a.createElement(v.a,{className:"Home-link",to:"/"},r.a.createElement("i",{className:"fas fa-angle-left"})),r.a.createElement("div",{className:"Law-title"},a.title||"\u8b80\u53d6\u4e2d",a.isDiscarded&&r.a.createElement("span",{className:"badge badge-danger"},"\u5df2\u5ee2\u6b62")),r.a.createElement("div",{className:"Setting-link dropdown"},r.a.createElement("button",{className:"btn btn-sm",type:"button","data-toggle":"dropdown",id:"lawDropdownMenuButton","aria-haspopup":"true","aria-expanded":"false"},r.a.createElement("i",{className:"fas fa-ellipsis-v"})),r.a.createElement("div",{className:"dropdown-menu dropdown-menu-right","aria-labelledby":"lawDropdownMenuButton"},r.a.createElement("div",{className:"dropdown-item disabled small"},"\u66f4\u65b0\u65e5\u671f\uff1a",a.lastUpdate),r.a.createElement(P.a,{className:"dropdown-item",to:t.url,exact:!0,activeClassName:"d-none"},"\u689d\u6587"),r.a.createElement(P.a,{className:a.divisions.length?"dropdown-item":"d-none",to:"".concat(t.url,"/divisions"),activeClassName:"d-none"},"\u7de8\u7ae0\u7bc0"),r.a.createElement(P.a,{className:"dropdown-item",to:"".concat(t.url,"/history"),activeClassName:"d-none"},"\u6cbf\u9769"),r.a.createElement("a",{className:"dropdown-item",href:"https://law.moj.gov.tw/LawClass/LawAll.aspx?pcode=".concat(a.pcode)},"\u5168\u570b\u6cd5\u898f\u8cc7\u6599\u5eab",r.a.createElement("i",{className:"pl-1 fas fa-external-link-alt"}))))),r.a.createElement(d.a,null,r.a.createElement(h.a,{path:t.path,exact:!0,render:function(){return r.a.createElement(T,Object.assign({},e.props,{law:a}))}}),r.a.createElement(h.a,{path:"".concat(t.path,"/divisions"),render:function(){return r.a.createElement(W,Object.assign({},e.props,{divisions:a.divisions}))}}),r.a.createElement(h.a,{path:"".concat(t.path,"/history"),children:function(){return r.a.createElement(J,{history:a.history})}})))}}]),t}(n.PureComponent)),T=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={query:new URLSearchParams(window.location.search).get("query")||""},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"setStickyElements",value:function(){var e=document.querySelector(".Law > header"),t=document.querySelector(".Law-tabContent > header");t.style.top=e.offsetHeight+"px";var a=e.offsetHeight+t.offsetHeight;document.querySelectorAll("section.Law-division").forEach(function(e){var t=a,n=e.querySelector(".DivisionHeader");n&&(n.style.top=a+"px",t+=n.offsetHeight),e.querySelectorAll(".Article").forEach(function(e){var a=e.style;a.paddingTop=t+"px",a.marginTop="-".concat(t,"px"),e.querySelector(".Article-header").style.top=t+"px"})})}},{key:"scrollToHash",value:function(){var e=window.location.hash;if(e){var t=document.querySelector(e);t&&window.scroll(0,t.offsetTop)}}},{key:"componentDidMount",value:function(){window.addEventListener("resize",this.setStickyElements),this.setStickyElements(),this.scrollToHash()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.setStickyElements)}},{key:"componentDidUpdate",value:function(){this.setStickyElements(),this.scrollToHash()}},{key:"render",value:function(){var e=this,t=this.state.query,a=this.props.law,n=a.articles,c=a.flatDivisions,i=a.preamble,o=i&&{number:0,content:i},s=[];if(/^[\s\-\d.~,]+$/.test(t))t.replace(/\s+/g,"").split(",").forEach(function(e){var t=e.split("~");if(1===t.length)if(i&&"0"===e)s.push(o);else{var a=n.find(function(t){return t.number===g(e)});a&&s.push(a)}else{var r,c=t.map(g),l=Object(A.a)(c,2),u=l[0],m=l[1];i&&0===u&&s.unshift(o),(r=s).push.apply(r,Object(q.a)(n.filter(function(e){return e.number>=u&&e.number<=m})))}s.sort(function(e,t){return e.number-t.number})});else{var l=w(t);s=this.props.law.articles.filter(function(e){return l(e.content)}),i&&l(i)&&s.unshift(o)}var u=[];return c.forEach(function(e){var t=s.filter(function(t){return t.number>=e.start&&t.number<=e.end});t.length&&u.push(Object.assign({articles:t},e))}),c.length?s.length&&!s[0].number&&u.unshift({articles:[s[0]]}):u.push({articles:s}),r.a.createElement("div",{className:"Law-tabContent"},r.a.createElement("header",null,r.a.createElement(C,{placeholder:"\u6cd5\u689d\u641c\u5c0b",value:t,onChange:function(t){e.setState({query:t}),window.scroll(0,0)}}),r.a.createElement("span",{className:"Law-articlesAmount"},s.length," \u7b46\u8cc7\u6599")),r.a.createElement("main",null,r.a.createElement("div",{className:"Law-articlesContainer"},u.map(function(t){return r.a.createElement("section",{key:t.type+t.start,className:"Law-division"},r.a.createElement(M,{division:t}),t.articles.map(function(t){return r.a.createElement(U,{key:t.number.toString(),article:t,law:e.props.law})}))})),r.a.createElement("div",{className:s.length>2?"Law-articlesSliderContainer d-print-none":"d-none"},r.a.createElement("input",{type:"range",min:"0",max:s.length-1,onChange:function(e){var t=document.querySelectorAll(".Article");window.scroll(0,t[e.target.value].offsetTop)}}))))}}]),t}(n.PureComponent),M=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.division;if(!e.title)return null;var t=e.ancestors||[],a=[].concat(Object(q.a)(t),[e]);return r.a.createElement("div",{className:"DivisionHeader"},a.map(function(e){return r.a.createElement("div",{key:e.type+e.start,className:"DivisionHeader-part"},r.a.createElement("div",{className:"DivisionHeader-partNumber"},"\u7b2c ",E(e.number)," ",e.type),r.a.createElement("div",{className:"DivisionHeader-partTitle"},e.title))}))}}]),t}(n.PureComponent),U=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).copyContent=a.copyContent.bind(Object(D.a)(Object(D.a)(a))),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"copyContent",value:function(){if(navigator.clipboard){var e=this.props,t=e.article,a=e.law,n=E(t.number),r=a.title+" "+(t.number?"\u7b2c ".concat(n," \u689d"):"\u524d\u8a00")+"\n"+t.content+"\n".concat(window.location.origin).concat(window.location.pathname,"?query=").concat(n);navigator.clipboard.writeText(r)}}},{key:"render",value:function(){var e=this.props,t=e.article,a=e.law,n=E(t.number);return r.a.createElement("dl",{className:"Article",id:"article".concat(n)},r.a.createElement("dt",{className:"Article-header"},r.a.createElement("span",{className:"Article-number"},t.number?"\u7b2c ".concat(n," \u689d"):"\u524d\u8a00"),r.a.createElement("div",{className:"dropleft dropdown"},r.a.createElement("button",{className:"btn btn-sm",type:"button","data-toggle":"dropdown",id:"articleDropdownButton".concat(n),"aria-haspopup":"true","aria-expanded":"false"},r.a.createElement("i",{className:"fas fa-ellipsis-v"})),r.a.createElement("div",{className:"dropdown-menu dropdown-menu-right","aria-labelledby":"articleDropdownButton".concat(n)},r.a.createElement("a",{className:"dropdown-item",href:"?query=".concat(n)},"\u6cd5\u689d\u9023\u7d50"),r.a.createElement("button",{className:"dropdown-item",onClick:this.copyContent},"\u8907\u88fd\u5167\u6587"),r.a.createElement("a",{className:"dropdown-item",href:"https://law.moj.gov.tw/LawClass/LawSingle.aspx?pcode=".concat(a.pcode,"&flno=").concat(n)},"\u5168\u570b\u6cd5\u898f\u8cc7\u6599\u5eab",r.a.createElement("i",{className:"pl-1 fas fa-external-link-alt"}))))),r.a.createElement("dd",{className:"Article-content"},r.a.createElement(F,{items:I()(t.content)})))}}]),t}(n.PureComponent),F=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.items;if(!e.length)return null;var a=e[0].stratum,n=e.map(function(e,n){var c="",i=e.text;if(a){var o=i.match(/^[\u7b2c\uff08()]?[\d\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d\u5341]+(\u985e\uff1a|[)\uff09\u3001.])?\s*/);o&&(c=o[0].trim(),/^[\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d\u5341]+$/.test(c)&&(c+="\u3000"),i=i.substring(o[0].length))}return r.a.createElement("li",{key:n},r.a.createElement("dl",null,r.a.createElement("dt",null,c),r.a.createElement("dd",null,i.split("\n").map(function(e,t){return r.a.createElement("p",{key:t},e)}),e.children&&r.a.createElement(t,{items:e.children}))))});return r.a.createElement("ol",{className:"ParaList-stratum".concat(a)},n)}}]),t}(n.PureComponent),W=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,a=this.props.divisions.map(function(a){return r.a.createElement("li",{key:a.type+a.start},r.a.createElement(v.a,{className:"DivisionItem",to:"".concat(e.props.match.url,"#article").concat(E(a.start))},r.a.createElement("span",{className:"DivisionItem-number"},"\u7b2c ",E(a.number)," ",a.type),r.a.createElement("div",{className:"DivisionItem-contentContainer"},r.a.createElement("span",{className:"DivisionItem-title"},a.title),r.a.createElement("span",{className:"DivisionItem-range"},"\xa7\xa7",E(a.start),"\uff5e",E(a.end)))),a.children&&r.a.createElement(t,Object.assign({},e.props,{divisions:a.children})))});return r.a.createElement("ol",{className:"DivisionList"},a)}}]),t}(n.PureComponent),J=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.history.map(function(e,t){return r.a.createElement("li",{key:t},e)});return r.a.createElement("ol",{className:"History"},e)}}]),t}(n.PureComponent),R=(a(38),function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){document.title=f.siteName}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("div",{id:"main"},r.a.createElement(p.a,{basename:f.basename},r.a.createElement(d.a,null,r.a.createElement(h.a,{path:"/",exact:!0,component:x}),r.a.createElement(h.a,{path:"/laws/:pcode",component:B})))),r.a.createElement("footer",null,r.a.createElement("a",{href:"https://github.com/kong0107/mojLaw"},"\u7db2\u7ad9\u539f\u59cb\u78bc"),r.a.createElement("a",{href:"https://github.com/kong0107/mojLawSplitJSON/tree/arranged"},"\u8cc7\u6599\u4f86\u6e90")))}}]),t}(n.PureComponent));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(R,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[20,2,1]]]);
//# sourceMappingURL=main.2147dcd2.chunk.js.map