(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(e,t,n){var a,r=[/^(?! )/,/^\u7b2c[\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d\u5341]+\u985e\uff1a/,/^\s*[\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d\u5341]+(\u3001|\u3000| {2})/,/^\s*[(\uff08][\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d\u5341]+[)\uff09]/,/^\s+\d+\./,/^\s+[(\uff08]\d+[)\uff09]/],i=function(e){for(var t=r.length-1;t>=0;--t)if(r[t].test(e))return t;return-1},c=function(e){var t,n=e.trimRight().split("\n").map(function(e){return e.trimRight()}),a=[],r="",c="",s=[];return n.forEach(function(e){if(r||(c=e),r+=e.trimLeft(),s.push(e),/[\u2500-\u257F]/.test(e)&&(t="table"),/[\u2200-\u22FF\uff0a\uff0b\uff0d\uff0f\uff1c\uff1d\uff1e]/.test(e)&&(t="formula"),/(\uff1a|\ufe30|\u3002|\uff08\u522a\u9664\uff09)$/.test(e)){var n=i(c);n<0?a[a.length-1].text+="\n"+r:0===n&&r.startsWith("\u4f46")?(a[a.length-1].text+=r,delete a[a.length-1].warning):a.push({text:r,stratum:n,children:[]});var o=a[a.length-1];t||32!==e.length||"\u3002"!==e.charAt(31)||(t="fullLine"),t&&(o.warning=t,o.raw=s),r="",t=!1,s=[]}}),a},s=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"stratum";return e.forEach(function(a,r){var i=a[n];if(i<0)throw new Error("\u5206\u5c64\u932f\u8aa4");if(i!==(t=r?Math.min(t,i):i))for(var c=r-1;c>=0;--c)if(e[c][n]<i)return e[c].children||(e[c].children=[]),void e[c].children.push(a)}),e.filter(function(e){return e[n]===t})};a=function(e){return s(c(e))},Object.defineProperties(a,{stratumRE:{value:r},getStratum:{value:i},text2paras:{value:c},arr2nested:{value:s}}),e.exports=a},19:function(e,t,n){e.exports=n(39)},25:function(e,t,n){},27:function(e,t,n){},29:function(e,t,n){},34:function(e,t,n){},37:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(15),c=n.n(i),s=(n(25),n(3)),o=n(4),l=n(6),u=n(5),m=n(7),h=n(42),p=n(43),f=n(40),d={siteName:"\u6cd5\u898f\u67e5\u8a62",basename:"/mojLaw/"},v=n(31),E=function(){var e;return(e=console).error.apply(e,arguments)},b=function(e){if(!e)return"0";var t=e.toString().slice(0,-2),n=e%100;return n?t.concat("-",n):t},g=function(e){var t=e.split(/[-.]/),n=100*parseInt(t[0]);return t[1]&&(n+=parseInt(t[1])),n},y=function(e){var t=[],n=[];e.trim().split(/\s+/).forEach(function(e){"-"!==e&&(e.startsWith("-")?n.push(e.substring(1)):t.push(e))});var a=function(e){return!n.some(function(t){return-1!==e.indexOf(t)})&&(!t.length||t.some(function(t){return-1!==e.indexOf(t)}))};return Object.assign(a,{yesList:t,noList:n}),a},j=function(e){return new Promise(function(t,n){return e.then(n,t)})},O=["https://cdn.jsdelivr.net/gh/kong0107/mojLawSplitJSON@arranged/","https://raw.githubusercontent.com/kong0107/mojLawSplitJSON/arranged/"],w=function(e){return(t=O.map(function(t){return n=t+e,a={cache:"no-cache"},new Promise(function(e,t){return fetch(n,a).then(function(n){return n.ok?e(n):t(new ReferenceError(n.statusText))}).catch(t)});var n,a}),j(Promise.all(t.map(j)))).then(function(e){return e.json()});var t},N=new Map;N.set("catalog",w("index.json"));var k={loadCatalog:function(){return N.get("catalog")},loadLaw:function(e){var t=N.get(e);return t||(t=w("FalVMingLing/".concat(e,".json")),N.set(e,t)),t}},C=(n(27),function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t="SearchBox";return this.props.className&&(t+=" "+this.props.className),r.a.createElement("div",{className:t},r.a.createElement("i",{className:"fas fa-search"}),r.a.createElement("input",{className:"SearchBox-input",type:"text",value:this.props.value,placeholder:this.props.placeholder,onChange:function(t){return e.props.onChange(t.target.value)}}),r.a.createElement("span",{className:this.props.value?"":"d-none",onClick:function(){return e.props.onChange("")}},r.a.createElement("i",{className:"fas fa-times-circle"})))}}]),t}(a.PureComponent)),S=(n(29),20),L=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={catalog:[],query:"",renderAmount:S},n}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;k.loadCatalog().then(function(t){return e.setState({catalog:t.sort(function(e,t){return t.lastUpdate-e.lastUpdate})})}).catch(E)}},{key:"render",value:function(){var e=this,t=y(this.state.query),n=this.state.catalog.filter(function(e){return t(e.name)});return r.a.createElement("div",{className:"Catalog"},r.a.createElement("header",null,r.a.createElement(C,{placeholder:d.siteName,value:this.state.query,onChange:function(t){return e.setState({query:t,renderAmount:S})}}),r.a.createElement("span",{className:"Catalog-amount"},n.length," \u7b46\u8cc7\u6599")),r.a.createElement("ul",{className:"Catalog-list"},n.slice(0,this.state.renderAmount).map(function(e){return r.a.createElement(x,{key:e.pcode,law:e})})),r.a.createElement("button",{type:"button",className:n.length>this.state.renderAmount?"btn btn-sm btn-outline-secondary":"d-none",onClick:function(){return e.setState({renderAmount:e.state.renderAmount+S})}},"\u986f\u793a\u66f4\u591a"))}}]),t}(a.PureComponent),x=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.law;return r.a.createElement("li",{className:"CatalogItem"},r.a.createElement(v.a,{className:"CatalogItem-link",to:"/laws/".concat(e.pcode)},r.a.createElement("div",{className:"CatalogItem-lastUpdate",title:"\u6700\u65b0\u7570\u52d5\u65e5\u671f"},r.a.createElement("time",null,e.lastUpdate)),r.a.createElement("div",{className:"CatalogItem-name"},e.name)))}}]),t}(a.PureComponent),D=n(18),A=n(12),P=n(41),q=n(16),I=n.n(q),H=(n(34),function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={law:{articles:[],divisions:[],flatDivisions:[],history:[]}},n}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;k.loadLaw(this.props.match.params.pcode).then(function(t){document.title=t.title;for(var n=t.divisions.slice(),a=0;a<n.length;){var r=n[a];r.children?function(){var e=(r.ancestors||[]).concat(r);r.children.forEach(function(t){return t.ancestors=e}),n.splice.apply(n,[a,1].concat(Object(A.a)(r.children)))}():++a}return t.flatDivisions=n,e.setState({law:t})}).catch(E)}},{key:"componentWillUnmount",value:function(){document.title=d.siteName}},{key:"render",value:function(){var e=this,t=this.props.match,n=this.state.law;return r.a.createElement("div",{className:"Law"},r.a.createElement("header",null,r.a.createElement(v.a,{className:"Home-link",to:"/"},r.a.createElement("i",{className:"fas fa-arrow-left"})),r.a.createElement("div",{className:"Law-title"},n.title||"\u8b80\u53d6\u4e2d",n.isDiscarded&&r.a.createElement("span",{className:"badge badge-danger"},"\u5df2\u5ee2\u6b62"))),r.a.createElement("ul",{className:"nav nav-tabs"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(P.a,{className:"nav-link",to:t.url,exact:!0,onClick:function(){return window.location.reload()}},"\u689d\u6587")),r.a.createElement("li",{className:n.divisions.length?"nav-item":"d-none"},r.a.createElement(P.a,{className:"nav-link",to:"".concat(t.url,"/divisions")},"\u7de8\u7ae0\u7bc0")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(P.a,{className:"nav-link",to:"".concat(t.url,"/history")},"\u6cbf\u9769"))),r.a.createElement(p.a,null,r.a.createElement(f.a,{path:t.path,exact:!0,render:function(){return r.a.createElement(U,{law:n})}}),r.a.createElement(f.a,{path:"".concat(t.path,"/divisions"),render:function(){return r.a.createElement(J,Object.assign({},e.props,{divisions:n.divisions}))}}),r.a.createElement(f.a,{path:"".concat(t.path,"/history"),children:function(){return r.a.createElement(R,{history:n.history})}})))}}]),t}(a.PureComponent)),U=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={query:new URLSearchParams(window.location.search).get("query")||""},n}return Object(m.a)(t,e),Object(o.a)(t,[{key:"setStickyElements",value:function(){var e=document.querySelector(".Law > header"),t=document.querySelector(".Law-tabContent > header");t.style.top=e.offsetHeight+"px";var n=e.offsetHeight+t.offsetHeight;document.querySelectorAll("section.Law-division").forEach(function(e){var t=n,a=e.querySelector(".DivisionHeader");a&&(a.style.top=n+"px",t+=a.offsetHeight),e.querySelectorAll(".Article").forEach(function(e){var n=e.style;n.paddingTop=t+"px",n.marginTop="-".concat(t,"px")})})}},{key:"componentDidMount",value:function(){window.addEventListener("resize",this.setStickyElements)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.setStickyElements)}},{key:"componentDidUpdate",value:function(){this.setStickyElements()}},{key:"render",value:function(){var e=this,t=this.state.query,n=this.props.law,a=n.articles,i=n.flatDivisions,c=[];if(/^[\s\-\d.~,]+$/.test(t))t.replace(/\s+/g,"").split(",").forEach(function(e){var t=e.split("~");if(1===t.length){var n=a.find(function(t){return t.number===g(e)});n&&c.push(n)}else{var r,i=t.map(g),s=Object(D.a)(i,2),o=s[0],l=s[1];(r=c).push.apply(r,Object(A.a)(a.filter(function(e){return e.number>=o&&e.number<=l})))}c.sort(function(e,t){return e.number-t.number})});else{var s=y(t);c=this.props.law.articles.filter(function(e){return s(e.content)})}var o=[];return i.forEach(function(e){var t=c.filter(function(t){return t.number>=e.start&&t.number<=e.end});t.length&&o.push(Object.assign({articles:t},e))}),i.length||o.push({articles:c}),r.a.createElement("div",{className:"Law-tabContent"},r.a.createElement("header",null,r.a.createElement(C,{placeholder:"\u6cd5\u689d\u641c\u5c0b",value:t,onChange:function(t){e.setState({query:t}),window.scroll(0,0)}}),r.a.createElement("span",{className:"Law-articlesAmount"},c.length," \u7b46\u8cc7\u6599")),r.a.createElement("main",null,r.a.createElement("div",{className:"Law-articlesContainer"},o.map(function(e){return r.a.createElement("section",{key:e.type+e.start,className:"Law-division"},r.a.createElement(M,{division:e}),e.articles.map(function(e){return r.a.createElement(T,{key:e.number.toString(),article:e})}))})),r.a.createElement("div",{className:c.length>2?"Law-articlesSliderContainer":"d-none"},r.a.createElement("input",{type:"range",min:"0",max:c.length-1,onChange:function(e){var t=e.target.value,n=document.querySelectorAll(".Article"),a=n[t].offsetTop-n[0].offsetTop;window.scroll(0,a)}}))))}}]),t}(a.PureComponent),M=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.division;if(!e.title)return null;var t=e.ancestors||[],n=[].concat(Object(A.a)(t),[e]);return r.a.createElement("div",{className:"DivisionHeader"},n.map(function(e){return r.a.createElement("div",{key:e.type+e.start,className:"DivisionHeader-part"},r.a.createElement("div",{className:"DivisionHeader-partNumber"},"\u7b2c ",b(e.number)," ",e.type),r.a.createElement("div",{className:"DivisionHeader-partTitle"},e.title))}))}}]),t}(a.PureComponent),T=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.article,t=b(e.number);return r.a.createElement("dl",{className:"Article",id:"article".concat(t)},r.a.createElement("dt",{className:"Article-number"},"\u7b2c ",t," \u689d"),r.a.createElement("dd",{className:"Article-content"},r.a.createElement(W,{items:I()(e.content)})))}}]),t}(a.PureComponent),W=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.items;if(!e.length)return null;var n=e[0].stratum,a=e.map(function(e,a){var i="",c=e.text;if(n){var s=c.match(/^[\u7b2c\uff08()]?[\d\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d\u5341]+(\u985e\uff1a|[)\uff09\u3001.])?\s*/);s&&(i=s[0].trim(),/^[\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d\u5341]+$/.test(i)&&(i+="\u3000"),c=c.substring(s[0].length))}return r.a.createElement("li",{key:a},r.a.createElement("dl",null,r.a.createElement("dt",null,i),r.a.createElement("dd",null,c.split("\n").map(function(e,t){return r.a.createElement("p",{key:t},e)}),e.children&&r.a.createElement(t,{items:e.children}))))});return r.a.createElement("ol",{className:"ParaList-stratum".concat(n)},a)}}]),t}(a.PureComponent),J=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,n=this.props.divisions.map(function(n){return r.a.createElement("li",{key:n.type+n.start},r.a.createElement(v.a,{className:"DivisionItem",to:"".concat(e.props.match.url,"?query=").concat(b(n.start),"~").concat(b(n.end))},r.a.createElement("span",{className:"DivisionItem-number"},"\u7b2c ",b(n.number)," ",n.type),r.a.createElement("div",{className:"DivisionItem-contentContainer"},r.a.createElement("span",{className:"DivisionItem-title"},n.title),r.a.createElement("span",{className:"DivisionItem-range"},"\xa7\xa7",b(n.start),"\uff5e",b(n.end)))),n.children&&r.a.createElement(t,Object.assign({},e.props,{divisions:n.children})))});return r.a.createElement("ol",{className:"DivisionList"},n)}}]),t}(a.PureComponent),R=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.history.map(function(e,t){return r.a.createElement("li",{key:t},e)});return r.a.createElement("ol",{className:"History"},e)}}]),t}(a.PureComponent),B=(n(37),function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){document.title=d.siteName}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("div",{id:"main"},r.a.createElement(h.a,{basename:d.basename},r.a.createElement(p.a,null,r.a.createElement(f.a,{path:"/",exact:!0,component:L}),r.a.createElement(f.a,{path:"/laws/:pcode",component:H})))),r.a.createElement("footer",null,r.a.createElement("a",{href:"https://github.com/kong0107/mojLaw"},"\u7db2\u7ad9\u539f\u59cb\u78bc"),r.a.createElement("a",{href:"https://github.com/kong0107/mojLawSplitJSON/tree/arranged"},"\u8cc7\u6599\u4f86\u6e90")))}}]),t}(a.PureComponent));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(B,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[19,2,1]]]);
//# sourceMappingURL=main.e98b835a.chunk.js.map