{"version":3,"sources":["js/lawtext2obj/lawtext2obj.js","js/config.js","js/utility.js","js/LawAPI.js","components/SearchBox.js","components/Catalog.js","components/Law.js","components/App.js","serviceWorker.js","index.js"],"names":["lawtext2obj","stratumRE","getStratum","text","i","length","test","text2paras","warning","lines","trimRight","split","map","str","paras","curPara","firstLineInPara","raw","forEach","line","trimLeft","push","stratum","startsWith","children","lastPara","charAt","arr2nested","arr","minDepth","depthProp","arguments","undefined","item","s","Error","Math","min","j","filter","Object","defineProperties","value","module","exports","config","siteName","basename","errorHandler","_console","console","error","apply","numf","number","p1","toString","slice","p2","concat","numf_reverse","frags","result","parseInt","createFilterFunction","query","yesList","noList","trim","frag","substring","some","indexOf","assign","cdns","getData","path","Promise","race","cdn","fetch","cache","then","res","ok","json","ReferenceError","statusText","promises","Map","set","LawAPI","loadCatalog","get","loadLaw","pcode","p","SearchBox","_this","this","className","props","react_default","a","createElement","type","placeholder","onChange","event","target","onClick","PureComponent","showBasicSize","Catalog","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","state","catalog","renderAmount","_this2","setState","sort","b","lastUpdate","catch","_this3","testFunc","showing","law","name","SearchBox_SearchBox","Catalog_CatalogItem","key","CatalogItem","Link","to","title","Law","articles","divisions","flatDivisions","history","match","params","document","div","ancestors","subDiv","splice","toConsumableArray","isDiscarded","NavLink","url","exact","window","location","reload","Switch","Route","render","Law_ArticlesTab","Law_DivisionsTab","Law_History","ArticlesTab","_this4","URLSearchParams","search","lawHeader","querySelector","contentHeader","style","top","offsetHeight","offset","querySelectorAll","articleOffset","header","artHead","paddingTop","marginTop","addEventListener","setStickyElements","removeEventListener","_this5","_this$props$law","replace","numOrRange","endpoints","find","_showing","_endpoints$map","_endpoints$map2","slicedToArray","start","end","content","sections","scroll","sec","Law_DivisionHeader","division","Law_Article","article","max","index","offsetTop","DivisionHeader","divList","Article","numText","id","Law_ParaList","items","ParaList","ordinal","DivisionsTab","_this6","History","App","BrowserRouter","component","href","Boolean","hostname","ReactDOM","components_App","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.aae45d9b.chunk.js","sourcesContent":["let lawtext2obj;\r\n\r\n{\r\n/**\r\n * 判斷項款目\r\n */\r\nconst stratumRE = [\r\n    /^(?! )/,\r\n    /^第[一二三四五六七八九十]+類：/,          // 所得稅法第14條第1項\r\n    /^\\s*[一二三四五六七八九十]+(、|　| {2})/,  // 憲法裡的「款」有些是全形空格，有些是兩個半形空格\r\n    /^\\s*[(（][一二三四五六七八九十]+[)）]/, // 有些括號是全形，有些是半形\r\n    /^\\s+\\d+\\./,\r\n    /^\\s+[(（]\\d+[)）]/\r\n];\r\nconst getStratum = text => {\r\n    for(let i = stratumRE.length - 1; i >= 0; --i)\r\n        if(stratumRE[i].test(text)) return i;\r\n    return -1;\r\n};\r\n\r\n\r\n/**\r\n * 處理換行字元排版，輸出一維陣列。\r\n *\r\n * 所得稅法第14條第1項那種「類」裡面還有分「段」的，先加個換行然後併進前一個元素裡。\r\n * 該項第四類各款後還有一段，就會被錯誤地歸到該類第三款裡頭，不過先不管了。\r\n *\r\n * 警告類型：（可能會互相覆蓋，但先不管了）\r\n * * fullLine: 該行雖是句號結尾，所以不知道下一行是否是新的一「項」。\r\n * * formula: 算式。但未必有等號或分號符號，例如全民健康保險藥物給付項目及支付標準第75條第3款第2目\r\n *   @see {@link https://unicode-table.com/en/blocks/mathematical-operators/ }\r\n *   @see {@link https://unicode-table.com/en/blocks/halfwidth-and-fullwidth-forms/ }\r\n * * table: 表格。例如用戶用電設備裝置規則第62條\r\n *   @see {@link https://unicode-table.com/en/blocks/box-drawing/ }\r\n */\r\nconst text2paras = text => {\r\n    const lines = text.trimRight().split(\"\\n\").map(str => str.trimRight());\r\n\r\n    let paras = []; // 不管層級的項款目陣列\r\n    let curPara = \"\";   // 處理中的項款目，不含空格，用於輸出\r\n    let firstLineInPara = \"\"; // 處理中的項款目的第一行原始文字，包含空格，用於判斷層級，以及是不是所得稅法第14條的情形。\r\n    let warning; // 紀錄可能需要警告的情形，於新的段落時重置。\r\n    let raw = []; // 紀錄原本是哪幾行字，於有警告的時候一併回傳。\r\n\r\n    lines.forEach(line => {\r\n        if(!curPara) firstLineInPara = line;\r\n        curPara += line.trimLeft();\r\n        raw.push(line);\r\n        if(/[\\u2500-\\u257F]/.test(line)) warning = \"table\";\r\n        if(/[\\u2200-\\u22FF＊＋－／＜＝＞]/.test(line)) warning = \"formula\";\r\n\r\n        // 如果這一行「不是」項款目的結束，那就換下一行處理。\r\n        if(!/(：|︰|。|（刪除）)$/.test(line)) return;\r\n\r\n        /**\r\n         * 處理「這一個項款目結束了」的情形。\r\n         * 預設是要將 curPara 當成一個新的項款目塞入，但要先偵測兩種例外情形：\r\n         * 如果 stratum 小於零，那就是所得稅法第14條那種「類款目」裡頭還分段的情形；\r\n         * 如果被判斷為「項」並以「但」字開頭，表示是前一個滿行的「項」的但書，例如所得稅法第80條第3項但書。\r\n         */\r\n        const stratum = getStratum(firstLineInPara);\r\n        if(stratum < 0) paras[paras.length - 1].text += \"\\n\" + curPara;\r\n        else if(stratum === 0 && curPara.startsWith(\"但\")) {\r\n            paras[paras.length - 1].text += curPara;\r\n            delete paras[paras.length - 1].warning;\r\n        }\r\n        else paras.push({\r\n            text: curPara,\r\n            stratum: stratum,\r\n            children: []\r\n        });\r\n\r\n        const lastPara = paras[paras.length - 1];\r\n        // 有可能該行雖是句號結尾，但其實還沒有要分項，因此標示警告。例如所得稅法第14-7條第4項。\r\n        if(!warning && line.length === 32 && line.charAt(31) === \"。\") warning = \"fullLine\";\r\n        if(warning) {\r\n            lastPara.warning = warning;\r\n            lastPara.raw = raw;\r\n        }\r\n\r\n        curPara = \"\";\r\n        warning = false;\r\n        raw = [];\r\n    });\r\n\r\n    return paras;\r\n};\r\n\r\n/**\r\n * 把一維陣列轉成巢狀\r\n *\r\n * 方法：把項目塞到「前一個比自己高層級」的 children 裡。\r\n */\r\nconst arr2nested = (arr, depthProp = \"stratum\") => {\r\n    let minDepth;\r\n    arr.forEach((item, i) => {\r\n        const s = item[depthProp];\r\n        if(s < 0) throw new Error(\"分層錯誤\");\r\n        minDepth = i ? Math.min(minDepth, s) : s;\r\n        if(s === minDepth) return;\r\n        for(let j = i - 1; j >= 0; --j)\r\n            if(arr[j][depthProp] < s) {\r\n                if(!arr[j].children) arr[j].children = [];\r\n                arr[j].children.push(item);\r\n                return;\r\n            }\r\n    });\r\n    // 最後回傳最高層級的陣列，即會有全部。\r\n    return arr.filter(item => item[depthProp] === minDepth);\r\n}\r\n\r\nlawtext2obj = text => arr2nested(text2paras(text));\r\nObject.defineProperties(lawtext2obj, {\r\n    \"stratumRE\": {value: stratumRE},\r\n    \"getStratum\": {value: getStratum},\r\n    \"text2paras\": {value: text2paras},\r\n    \"arr2nested\": {value: arr2nested}\r\n});\r\n}\r\n\r\nif(typeof module === 'object') module.exports = lawtext2obj;\r\n//export default lawtext2obj;\r\n/*\r\n    如果改成 ES6 方式：\r\n    * 前端瀏覽器的引用方法需改用 <script type=\"mode\" src=\"lawtext2obj.js\"></script>\r\n    * Chrome 外掛需將本檔列在 web_accessible_resources ，再用 content_scripts 列的檔案去引入，參閱：\r\n      * https://stackoverflow.com/questions/48104433/how-to-import-es6-modules-in-content-script-for-chrome-extension/48121629#48121629\r\n      * https://medium.com/front-end-hacking/es6-modules-in-chrome-extensions-an-introduction-313b3fce955b\r\n*/\r\n","const config = {\r\n  siteName: '法規查詢',\r\n  basename: '/mojLaw/'\r\n};\r\n\r\nexport default config;\r\n","export const errorHandler = (...args) =>\r\n  console.error(...args)\r\n;\r\n\r\n/**\r\n * Rewrite Fetch API to reject non-ok responses.\r\n * Reject with a TypeError when a network error is encountered or CORS is misconfigured on the server side.\r\n * Reject with a ReferenceError if there's a response without OK status.\r\n * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch#Checking_that_the_fetch_was_successful }\r\n */\r\nexport const fetch2 = (input, init) =>\r\n  new Promise((resolve, reject) =>\r\n    fetch(input, init)\r\n    .then(res => res.ok ? resolve(res) : reject(new ReferenceError(res.statusText)))\r\n    .catch(reject)\r\n  )\r\n;\r\n\r\n/**\r\n * @param {integer} milliseconds\r\n * @returns {Promise} resolves to undefined after specified milliseconds\r\n */\r\nexport const wait = milliseconds =>\r\n  new Promise(resolve => setTimeout(resolve, milliseconds))\r\n;\r\n\r\nexport const numf = number => {\r\n  if(!number) return '0';\r\n  const p1 = number.toString().slice(0, -2);\r\n  const p2 = number % 100;\r\n  return p2 ? p1.concat('-', p2) : p1;\r\n};\r\n\r\nexport const numf_reverse = text => {\r\n  const frags = text.split(/[-.]/);\r\n  let result = parseInt(frags[0]) * 100;\r\n  if(frags[1]) result += parseInt(frags[1]);\r\n  return result;\r\n}\r\n\r\n/**\r\n * @see {@link https://stackoverflow.com/questions/9083037/#answer-32851198 }\r\n * @see {@link http://blog.stevenlevithan.com/archives/javascript-roman-numeral-converter#comment-16107 }\r\n */\r\nexport const romanize = number => {\r\n  const lookup = {\r\n    M: 1000, CM: 900, D: 500, CD: 400,\r\n    C: 100,  XC: 90,  L: 50,  XL: 40,\r\n    X: 10,   IX: 9,   V: 5,   IV: 4,\r\n    I: 1\r\n  };\r\n  let roman = '';\r\n  for(let i in lookup) {\r\n    while(number >= lookup[i]) {\r\n      roman += i;\r\n      number -= lookup[i];\r\n    }\r\n  }\r\n  return roman;\r\n};\r\n\r\n/**\r\n * Create a function that checks whether a string contains a joined-keyword string\r\n */\r\nexport const createFilterFunction = query => {\r\n  const yesList = [], noList = [];\r\n  query.trim().split(/\\s+/).forEach(frag => {\r\n    if(frag === '-') return;\r\n    if(frag.startsWith('-')) noList.push(frag.substring(1));\r\n    else yesList.push(frag);\r\n  });\r\n  const result = text => {\r\n    if(noList.some(frag => text.indexOf(frag) !== -1)) return false;\r\n    if(!yesList.length) return true;\r\n    return yesList.some(frag => text.indexOf(frag) !== -1);\r\n  };\r\n  Object.assign(result, {yesList, noList});\r\n  return result;\r\n}\r\n\r\n","const cdns = [\r\n  'https://cdn.jsdelivr.net/gh/kong0107/mojLawSplitJSON@arranged/',\r\n  'https://raw.githubusercontent.com/kong0107/mojLawSplitJSON/arranged/'\r\n];\r\n\r\nconst getData = path =>\r\n  Promise.race(\r\n    cdns.map(cdn => fetch(cdn + path, {cache: 'no-cache'}))\r\n  ).then(res => {\r\n    if(res.ok) return res.json();\r\n    else throw new ReferenceError(res.statusText);\r\n  });\r\n;\r\n\r\nconst promises = new Map();\r\npromises.set('catalog', getData('index.json'));\r\n\r\nconst LawAPI = {\r\n  loadCatalog: () => promises.get('catalog'),\r\n  loadLaw: pcode => {\r\n    let p = promises.get(pcode);\r\n    if(!p) {\r\n      p = getData(`FalVMingLing/${pcode}.json`);\r\n      promises.set(pcode, p);\r\n    }\r\n    return p;\r\n  }\r\n};\r\n\r\nexport default LawAPI;\r\n","import React, {\r\n  PureComponent\r\n} from 'react';\r\n\r\nimport '../styles/SearchBox.scss';\r\n\r\nexport default class SearchBox extends PureComponent {\r\n  render() {\r\n    let className = 'SearchBox';\r\n    if(this.props.className) className += ' ' + this.props.className;\r\n\r\n    return (\r\n      <div className={className}>\r\n        <i className=\"fas fa-search\" />\r\n        <input className=\"SearchBox-input\"\r\n          type=\"text\"\r\n          value={this.props.value}\r\n          placeholder={this.props.placeholder}\r\n          onChange={event => this.props.onChange(event.target.value)}\r\n        />\r\n        <span className={this.props.value ? '' : 'd-none'}\r\n          onClick={() => this.props.onChange('')}\r\n        >\r\n          <i className=\"fas fa-times-circle\" />\r\n        </span>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, {\r\n  PureComponent\r\n} from 'react';\r\nimport {\r\n  Link\r\n} from 'react-router-dom';\r\n\r\nimport config from '../js/config';\r\nimport {\r\n  errorHandler,\r\n  createFilterFunction\r\n} from '../js/utility';\r\nimport LawAPI from '../js/LawAPI';\r\nimport SearchBox from './SearchBox';\r\n\r\nimport '../styles/Catalog.scss';\r\n\r\nconst showBasicSize = 20;\r\nexport default class Catalog extends PureComponent {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      catalog: [],\r\n      query: '',\r\n      renderAmount: showBasicSize // 目前能顯示的列表長度\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    LawAPI.loadCatalog()\r\n    .then(catalog => this.setState(\r\n      {catalog: catalog.sort((a, b) => b.lastUpdate - a.lastUpdate)}\r\n    ))\r\n    .catch(errorHandler);\r\n  }\r\n\r\n  render() {\r\n    const testFunc = createFilterFunction(this.state.query);\r\n    const showing = this.state.catalog.filter(law => testFunc(law.name));\r\n\r\n    return (\r\n      <div className=\"Catalog\">\r\n        <header>\r\n          <SearchBox\r\n            placeholder={config.siteName}\r\n            value={this.state.query}\r\n            onChange={text => this.setState({\r\n              query: text,\r\n              renderAmount: showBasicSize\r\n            })}\r\n          />\r\n          <span className=\"Catalog-amount\">\r\n            {showing.length} 筆資料\r\n          </span>\r\n        </header>\r\n        <ul className=\"Catalog-list\">\r\n          {showing.slice(0, this.state.renderAmount).map(law =>\r\n            <CatalogItem key={law.pcode} law={law} />\r\n          )}\r\n        </ul>\r\n        <button type=\"button\"\r\n          className={showing.length > this.state.renderAmount ? 'btn btn-sm btn-outline-secondary' : 'd-none'}\r\n          onClick={() => this.setState({renderAmount: this.state.renderAmount + showBasicSize})}\r\n        >顯示更多</button>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nclass CatalogItem extends PureComponent {\r\n  render() {\r\n    const {law} = this.props;\r\n    return (\r\n      <li className=\"CatalogItem\">\r\n        <Link className=\"CatalogItem-link\" to={`/laws/${law.pcode}`}>\r\n          <div className=\"CatalogItem-lastUpdate\" title=\"最新異動日期\">\r\n            <time>{law.lastUpdate}</time>\r\n          </div>\r\n          <div className=\"CatalogItem-name\">{law.name}</div>\r\n        </Link>\r\n      </li>\r\n    );\r\n  }\r\n}\r\n","import React, {\r\n  PureComponent\r\n} from 'react';\r\nimport {\r\n  Route,\r\n  Switch,\r\n  Link,\r\n  NavLink\r\n} from 'react-router-dom';\r\n\r\nimport config from '../js/config';\r\nimport {\r\n  errorHandler,\r\n  createFilterFunction,\r\n  numf,\r\n  numf_reverse\r\n} from '../js/utility';\r\nimport lawtext2obj from '../js/lawtext2obj';\r\nimport LawAPI from '../js/LawAPI';\r\nimport SearchBox from './SearchBox';\r\n\r\nimport '../styles/Law.scss';\r\n\r\nexport default class Law extends PureComponent {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      law:{\r\n        articles: [],\r\n        divisions: [],\r\n        flatDivisions: [],\r\n        history: []\r\n      }\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    LawAPI.loadLaw(this.props.match.params.pcode)\r\n    .then(law => {\r\n      document.title = law.title;\r\n\r\n      // 只留下編章節結構樹的葉子\r\n      const flatDivisions = law.divisions.slice();\r\n      for(let i = 0; i < flatDivisions.length;) {\r\n        const div = flatDivisions[i];\r\n        if(div.children) {\r\n          const ancestors = (div.ancestors || []).concat(div);\r\n          div.children.forEach(subDiv => subDiv.ancestors = ancestors);\r\n          flatDivisions.splice(i, 1, ...div.children);\r\n        }\r\n        else ++i;\r\n      }\r\n      law.flatDivisions = flatDivisions;\r\n      return this.setState({law});\r\n    })\r\n    .catch(errorHandler);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    document.title = config.siteName;\r\n  }\r\n\r\n  render() {\r\n    const { match } = this.props;\r\n    const { law } = this.state;\r\n\r\n    return (\r\n      <div className=\"Law\">\r\n        <header>\r\n          <Link className=\"Home-link\" to=\"/\"><i className=\"fas fa-arrow-left\" /></Link>\r\n          <div className=\"Law-title\">\r\n            {law.title || '讀取中'}\r\n            {law.isDiscarded && <span className=\"badge badge-danger\">已廢止</span> }\r\n          </div>\r\n        </header>\r\n        <ul className=\"nav nav-tabs\">\r\n          <li className=\"nav-item\">\r\n            <NavLink className=\"nav-link\"\r\n              to={match.url} exact\r\n              onClick={() => window.location.reload()}\r\n            >條文</NavLink>\r\n          </li>\r\n          <li className={law.divisions.length ? 'nav-item' : 'd-none'}>\r\n            <NavLink className=\"nav-link\"\r\n              to={`${match.url}/divisions`}\r\n            >編章節</NavLink>\r\n          </li>\r\n          <li className=\"nav-item\">\r\n            <NavLink className=\"nav-link\"\r\n              to={`${match.url}/history`}\r\n            >沿革</NavLink>\r\n          </li>\r\n        </ul>\r\n        <Switch>\r\n          <Route path={match.path} exact render={() => <ArticlesTab law={law} />} />\r\n          <Route path={`${match.path}/divisions`} render={() => <DivisionsTab {...this.props} divisions={law.divisions} />} />\r\n          <Route path={`${match.path}/history`} children={() => <History history={law.history} />} />\r\n        </Switch>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nclass ArticlesTab extends PureComponent {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      query: (new URLSearchParams(window.location.search)).get('query') || ''\r\n    };\r\n  }\r\n\r\n  //設定各 sticky 元素的高度。因法規名稱和章節名稱都可能換行而造成不能把高度寫死。\r\n  setStickyElements() {\r\n    const lawHeader = document.querySelector('.Law > header');\r\n    const contentHeader = document.querySelector('.Law-tabContent > header');\r\n    contentHeader.style.top = lawHeader.offsetHeight + 'px';\r\n    const offset = lawHeader.offsetHeight + contentHeader.offsetHeight;\r\n    document.querySelectorAll('section.Law-division').forEach(div => {\r\n      let articleOffset = offset;\r\n      const header = div.querySelector('.DivisionHeader');\r\n      if(header) {\r\n        header.style.top = offset + 'px';\r\n        articleOffset += header.offsetHeight;\r\n      }\r\n      /**\r\n       * 因應法條的 jump link 需求，設定 padding-top 和 margin-top 。\r\n       * 「剛好」因此不需要再動態設定條號的 sticky position 。\r\n       * @see {@link http://nicolasgallagher.com/jump-links-and-viewport-positioning/demo/ }\r\n       */\r\n      div.querySelectorAll('.Article').forEach(artHead => {\r\n        const s = artHead.style;\r\n        s.paddingTop = articleOffset + 'px';\r\n        s.marginTop = `-${articleOffset}px`;\r\n      });\r\n    });\r\n  }\r\n\r\n  componentDidMount() {\r\n    window.addEventListener('resize', this.setStickyElements);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener('resize', this.setStickyElements);\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    this.setStickyElements();\r\n  }\r\n\r\n  render() {\r\n    const query = this.state.query;\r\n    const {articles, flatDivisions} = this.props.law;\r\n\r\n    let showing = [];\r\n    if(/^[\\s\\-\\d.~,]+$/.test(query)) {\r\n      // 列出條號的情形，要把字串拆回數字再比對\r\n      query.replace(/\\s+/g, '').split(',').forEach(numOrRange => {\r\n        const endpoints = numOrRange.split('~');\r\n        if(endpoints.length === 1) {\r\n          const target = articles.find(a => a.number === numf_reverse(numOrRange));\r\n          if(target) showing.push(target);\r\n        }\r\n        else {\r\n          const [start, end] = endpoints.map(numf_reverse);\r\n          showing.push(...articles.filter(a => a.number >= start && a.number <= end));\r\n        }\r\n        showing.sort((a, b) => a.number - b.number);\r\n      });\r\n    }\r\n    else {\r\n      const testFunc = createFilterFunction(query);\r\n      showing = this.props.law.articles.filter(a => testFunc(a.content));\r\n    }\r\n\r\n    const sections = [];\r\n    flatDivisions.forEach(div => {\r\n      const articles = showing.filter(a => a.number >= div.start && a.number <= div.end);\r\n      if(!articles.length) return;\r\n      sections.push(Object.assign({articles}, div));\r\n    });\r\n    if(!flatDivisions.length) sections.push({articles: showing});\r\n\r\n    return (\r\n      <div className=\"Law-tabContent\">\r\n        <header>\r\n          <SearchBox\r\n            placeholder=\"法條搜尋\"\r\n            value={query}\r\n            onChange={text => {\r\n              this.setState({query: text});\r\n              window.scroll(0, 0);\r\n            }}\r\n          />\r\n          <span className=\"Law-articlesAmount\">\r\n            {showing.length} 筆資料\r\n          </span>\r\n        </header>\r\n        <main>\r\n          <div className=\"Law-articlesContainer\">\r\n            {sections.map(sec =>\r\n              <section key={sec.type + sec.start} className=\"Law-division\">\r\n                <DivisionHeader division={sec} />\r\n                {sec.articles.map(a => <Article key={a.number.toString()} article={a} />)}\r\n              </section>\r\n            )}\r\n          </div>\r\n          <div className={showing.length > 2 ? 'Law-articlesSliderContainer' : 'd-none'}>\r\n            <input type=\"range\" min=\"0\" max={showing.length - 1}\r\n              onChange={event => {\r\n                const index = event.target.value;\r\n                const articles = document.querySelectorAll('.Article');\r\n                const offset = articles[index].offsetTop - articles[0].offsetTop;\r\n                window.scroll(0, offset);\r\n              }}\r\n            />\r\n          </div>\r\n        </main>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nclass DivisionHeader extends PureComponent {\r\n  render() {\r\n    const {division} = this.props;\r\n    if(!division.title) return null;\r\n    const ancestors = division.ancestors || [];\r\n    const divList = [...ancestors, division];\r\n    return (\r\n      <div className=\"DivisionHeader\">\r\n        {divList.map(div =>\r\n          <div key={div.type + div.start} className=\"DivisionHeader-part\">\r\n            <div className=\"DivisionHeader-partNumber\">第 {numf(div.number)} {div.type}</div>\r\n            <div className=\"DivisionHeader-partTitle\">{div.title}</div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nclass Article extends PureComponent {\r\n  render() {\r\n    const {article} = this.props;\r\n    const numText = numf(article.number);\r\n    return (\r\n      <dl className=\"Article\" id={`article${numText}`}>\r\n        <dt className=\"Article-number\">第 {numText} 條</dt>\r\n        <dd className=\"Article-content\">\r\n          <ParaList items={lawtext2obj(article.content)} />\r\n        </dd>\r\n      </dl>\r\n    );\r\n  }\r\n}\r\n\r\nclass ParaList extends PureComponent {\r\n  render() {\r\n    const {items} = this.props;\r\n    if(!items.length) return null;\r\n    const stratum = items[0].stratum;\r\n\r\n    const children = items.map((item, index) => {\r\n      let ordinal = '', text = item.text;\r\n      if(stratum) {\r\n        const match = text.match(/^[第（()]?[\\d一二三四五六七八九十]+(類：|[)）、.])?\\s*/);\r\n        if(match) {\r\n          ordinal = match[0].trim();\r\n          if(/^[一二三四五六七八九十]+$/.test(ordinal)) ordinal += '　'; // for 憲法§108\r\n          text = text.substring(match[0].length);\r\n        }\r\n      }\r\n      return (\r\n        <li key={index}>\r\n          <dl>\r\n            <dt>{ordinal}</dt>\r\n            <dd>\r\n              {text.split('\\n').map((p, j) => <p key={j}>{p}</p>)}\r\n              {item.children && <ParaList items={item.children} />}\r\n            </dd>\r\n          </dl>\r\n        </li>\r\n      );\r\n    });\r\n    return <ol className={`ParaList-stratum${stratum}`}>{children}</ol>;\r\n  }\r\n}\r\n\r\n\r\nclass DivisionsTab extends PureComponent {\r\n  render() {\r\n    const children = this.props.divisions.map(div => {\r\n      return (\r\n        <li key={div.type + div.start}>\r\n          <Link className=\"DivisionItem\"\r\n            to={`${this.props.match.url}?query=${numf(div.start)}~${numf(div.end)}`}\r\n          >\r\n            <span className=\"DivisionItem-number\">第 {numf(div.number)} {div.type}</span>\r\n            <div className=\"DivisionItem-contentContainer\">\r\n              <span className=\"DivisionItem-title\">{div.title}</span>\r\n              <span className=\"DivisionItem-range\">§§{numf(div.start)}～{numf(div.end)}</span>\r\n            </div>\r\n          </Link>\r\n          {div.children && <DivisionsTab {...this.props} divisions={div.children} />}\r\n        </li>\r\n      );\r\n    });\r\n    return <ol className=\"DivisionList\">{children}</ol>;\r\n  }\r\n}\r\n\r\nclass History extends PureComponent {\r\n  render() {\r\n    const children = this.props.history.map((item, index) =>\r\n      <li key={index}>{item}</li>\r\n    );\r\n    return <ol className=\"History\">{children}</ol>;\r\n  }\r\n}\r\n","import React, {\r\n  PureComponent\r\n} from 'react';\r\n\r\nimport {\r\n  BrowserRouter as Router,\r\n  Route,\r\n  Switch\r\n} from 'react-router-dom';\r\n\r\nimport config from '../js/config';\r\nimport Catalog from './Catalog';\r\nimport Law from './Law';\r\nimport '../styles/App.scss';\r\n\r\nclass App extends PureComponent {\r\n  componentDidMount() {\r\n    document.title = config.siteName;\r\n  }\r\n\r\n  render() {return (\r\n    <div className=\"App\">\r\n      <div id=\"main\">\r\n        <Router basename={config.basename}>\r\n          <Switch>\r\n            <Route path=\"/\" exact component={Catalog} />\r\n            <Route path=\"/laws/:pcode\" component={Law} />\r\n          </Switch>\r\n        </Router>\r\n      </div>\r\n      <footer>\r\n        <a href=\"https://github.com/kong0107/mojLaw\">網站原始碼</a>\r\n        <a href=\"https://github.com/kong0107/mojLawSplitJSON/tree/arranged\">資料來源</a>\r\n      </footer>\r\n    </div>\r\n  );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read http://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.scss';\r\nimport App from './components/App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: http://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}